import{j as s}from"./jsx-runtime-4ca860c5.js";import{r as I,R as H}from"./index-61bf1805.js";import{l as je,m as Ae,n as se,I as Z,o as we}from"./index-fbaf4a77.js";import{g as Te}from"./_baseForOwn-561664b0.js";import{c as Ee,t as Me,d as qe,a as Re,f as Fe}from"./formatters-2cdf89d2.js";import{c as fe,T as W}from"./index-538b702c.js";function Oe(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,n=Object.getOwnPropertySymbols(e);u<n.length;u++)t.indexOf(n[u])<0&&Object.prototype.propertyIsEnumerable.call(e,n[u])&&(r[n[u]]=e[n[u]]);return r}var J;(function(e){e.event="event",e.props="prop"})(J||(J={}));function K(){}function ke(e){var t,r=void 0;return function(){for(var n=[],u=arguments.length;u--;)n[u]=arguments[u];return t&&n.length===t.length&&n.every(function(c,v){return c===t[v]})||(t=n,r=e.apply(void 0,n)),r}}function re(e){return!!(e||"").match(/\d/)}function ae(e){return e==null}function Be(e){return typeof e=="number"&&isNaN(e)}function Le(e){return ae(e)||Be(e)||typeof e=="number"&&!isFinite(e)}function De(e){var t=I.useRef(e);t.current=e;var r=I.useRef(function(){for(var n=[],u=arguments.length;u--;)n[u]=arguments[u];return t.current.apply(t,n)});return r.current}function ie(e,t){return Array(t+1).join(e)}function Pe(e){var t=e+"",r=t[0]==="-"?"-":"";r&&(t=t.substring(1));var n=t.split(/[eE]/g),u=n[0],c=n[1];if(c=Number(c),!c)return r+u;u=u.replace(".","");var v=1+c,b=u.length;return v<0?u="0."+ie("0",Math.abs(v))+u:v>=b?u=u+ie("0",v-b):u=(u.substring(0,v)||"0")+"."+u.substring(v),r+u}function le(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var r=e.createTextRange();return r.move("character",t),r.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Ue=ke(function(e,t){for(var r=0,n=0,u=e.length,c=t.length;e[r]===t[r]&&r<u;)r++;for(;e[u-1-n]===t[c-1-n]&&c-n>r&&u-n>r;)n++;return{from:{start:r,end:u-n},to:{start:r,end:c-n}}});function Ke(e,t,r){return Math.min(Math.max(e,t),r)}function te(e){return Math.max(e.selectionStart,e.selectionEnd)}function ze(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function $e(e){var t=e.currentValue,r=e.formattedValue,n=e.currentValueIndex,u=e.formattedValueIndex;return t[n]===r[u]}function He(e,t,r,n,u,c,v){v===void 0&&(v=$e);var b=u.findIndex(function(k){return k}),A=e.slice(0,b);!t&&!r.startsWith(A)&&(t=A,r=A+r,n=n+A.length);for(var w=r.length,M=e.length,T={},p=new Array(w),g=0;g<w;g++){p[g]=-1;for(var o=0,N=M;o<N;o++){var S=v({currentValue:r,lastValue:t,formattedValue:e,currentValueIndex:g,formattedValueIndex:o});if(S&&T[o]!==!0){p[g]=o,T[o]=!0;break}}}for(var f=n;f<w&&(p[f]===-1||!c(r[f]));)f++;var C=f===w||p[f]===-1?M:p[f];for(f=n-1;f>0&&p[f]===-1;)f--;var y=f===-1||p[f]===-1?0:p[f]+1;return y>C?C:n-y<C-n?y:C}function oe(e,t,r,n){var u=e.length;if(t=Ke(t,0,u),n==="left"){for(;t>=0&&!r[t];)t--;t===-1&&(t=r.indexOf(!0))}else{for(;t<=u&&!r[t];)t++;t>u&&(t=r.lastIndexOf(!0))}return t===-1&&(t=u),t}function We(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),r=0,n=t.length;r<n;r++)t[r]=!!(re(e[r])||re(e[r-1]));return t}function Ge(e,t,r,n,u,c){c===void 0&&(c=K);var v=De(function(o,N){var S,f;return Le(o)?(f="",S=""):typeof o=="number"||N?(f=typeof o=="number"?Pe(o):o,S=n(f)):(f=u(o,void 0),S=n(f)),{formattedValue:S,numAsString:f}}),b=I.useState(function(){return v(ae(e)?t:e,r)}),A=b[0],w=b[1],M=function(o,N){o.formattedValue!==A.formattedValue&&w({formattedValue:o.formattedValue,numAsString:o.value}),c(o,N)},T=e,p=r;ae(e)&&(T=A.numAsString,p=!0);var g=v(T,p);return I.useMemo(function(){w(g)},[g.formattedValue]),[A,M]}function Ze(e){return e.replace(/[^0-9]/g,"")}function Je(e){return e}function Qe(e){var t=e.type;t===void 0&&(t="text");var r=e.displayType;r===void 0&&(r="input");var n=e.customInput,u=e.renderText,c=e.getInputRef,v=e.format;v===void 0&&(v=Je);var b=e.removeFormatting;b===void 0&&(b=Ze);var A=e.defaultValue,w=e.valueIsNumericString,M=e.onValueChange,T=e.isAllowed,p=e.onChange;p===void 0&&(p=K);var g=e.onKeyDown;g===void 0&&(g=K);var o=e.onMouseUp;o===void 0&&(o=K);var N=e.onFocus;N===void 0&&(N=K);var S=e.onBlur;S===void 0&&(S=K);var f=e.value,C=e.getCaretBoundary;C===void 0&&(C=We);var y=e.isValidInputCharacter;y===void 0&&(y=re);var k=e.isCharacterSame,L=Oe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),P=Ge(f,A,!!w,v,b,M),U=P[0],d=U.formattedValue,q=U.numAsString,O=P[1],R=I.useRef({formattedValue:d,numAsString:q}),F=function(a,i){R.current={formattedValue:a.formattedValue,numAsString:a.value},O(a,i)},G=I.useState(!1),Q=G[0],E=G[1],V=I.useRef(null),B=I.useRef({setCaretTimeout:null,focusTimeout:null});I.useEffect(function(){return E(!0),function(){clearTimeout(B.current.setCaretTimeout),clearTimeout(B.current.focusTimeout)}},[]);var ge=v,X=function(a,i){var l=parseFloat(i);return{formattedValue:a,value:i,floatValue:isNaN(l)?void 0:l}},D=function(a,i,l){a.selectionStart===0&&a.selectionEnd===a.value.length||(le(a,i),B.current.setCaretTimeout=setTimeout(function(){a.value===l&&a.selectionStart!==a.selectionEnd&&le(a,i)},0))},z=function(a,i,l){return oe(a,i,C(a),l)},Y=function(a,i,l){var x=C(i),h=He(i,d,a,l,x,y,k);return h=oe(i,h,x),h},pe=function(a){var i=a.formattedValue;i===void 0&&(i="");var l=a.input,x=a.setCaretPosition;x===void 0&&(x=!0);var h=a.source,m=a.event,_=a.numAsString,j=a.caretPos;if(l){if(j===void 0&&x){var $=a.inputValue||l.value,ee=te(l);l.value=i,j=Y($,i,ee)}l.value=i,x&&j!==void 0&&D(l,j,i)}i!==d&&F(X(i,_),{event:m,source:h})};I.useEffect(function(){var a=R.current,i=a.formattedValue,l=a.numAsString;d!==i&&(d!==q||i!==l)&&F(X(d,q),{event:void 0,source:J.props})},[d,q]);var xe=V.current?te(V.current):void 0,he=typeof window<"u"?I.useLayoutEffect:I.useEffect;he(function(){var a=V.current;if(d!==R.current.formattedValue&&a){var i=Y(R.current.formattedValue,d,xe);a.value=d,D(a,i,d)}},[d]);var ye=function(a,i,l){var x=Ue(d,a),h=Object.assign(Object.assign({},x),{lastValue:d}),m=b(a,h),_=ge(m);if(m=b(_,void 0),T&&!T(X(_,m))){var j=i.target,$=te(j),ee=Y(a,d,$);return j.value=d,D(j,ee,d),!1}return pe({formattedValue:_,numAsString:m,inputValue:a,event:i,source:l,setCaretPosition:!0,input:i.target}),!0},Ve=function(a){var i=a.target,l=i.value,x=ye(l,a,J.event);x&&p(a)},be=function(a){var i=a.target,l=a.key,x=i.selectionStart,h=i.selectionEnd,m=i.value;m===void 0&&(m="");var _;if(l==="ArrowLeft"||l==="Backspace"?_=Math.max(x-1,0):l==="ArrowRight"?_=Math.min(x+1,m.length):l==="Delete"&&(_=x),_===void 0||x!==h){g(a);return}var j=_;if(l==="ArrowLeft"||l==="ArrowRight"){var $=l==="ArrowLeft"?"left":"right";j=z(m,_,$),j!==_&&a.preventDefault()}else l==="Delete"&&!y(m[_])?j=z(m,_,"right"):l==="Backspace"&&!y(m[_])&&(j=z(m,_,"left"));j!==_&&D(i,j,m),a.isUnitTestRun&&D(i,j,m),g(a)},_e=function(a){var i=a.target,l=i.selectionStart,x=i.selectionEnd,h=i.value;if(h===void 0&&(h=""),l===x){var m=z(h,l);m!==l&&D(i,m,h)}o(a)},Ie=function(a){a.persist&&a.persist();var i=a.target;V.current=i,B.current.focusTimeout=setTimeout(function(){var l=i.selectionStart,x=i.selectionEnd,h=i.value;h===void 0&&(h="");var m=z(h,l);m!==l&&!(l===0&&x===h.length)&&D(i,m,h),N(a)},0)},Ce=function(a){V.current=null,clearTimeout(B.current.focusTimeout),clearTimeout(B.current.setCaretTimeout),S(a)},Ne=Q&&ze()?"numeric":void 0,ue=Object.assign({inputMode:Ne},L,{type:t,value:d,onChange:Ve,onKeyDown:be,onMouseUp:_e,onFocus:Ie,onBlur:Ce});if(r==="text")return u?H.createElement(H.Fragment,null,u(d,L)||null):H.createElement("span",Object.assign({},L,{ref:c}),d);if(n){var Se=n;return H.createElement(Se,Object.assign({},ue,{ref:c}))}return H.createElement("input",Object.assign({},ue,{ref:c}))}const de={default:"",primary:"text-field--primary",secondary:"text-field--secondary"},ce={default:"",bordered:"input-bordered text-field--bordered",ghost:"input-ghost text-field--ghost"},ve={default:"text-field--default",lg:"text-field--lg",sm:"text-field--sm"},me={left:"text-field--left",center:"text-field--center",right:"text-field--right"},ne=({name:e,placeholder:t="",type:r="text",disabled:n=!1,readOnly:u=!1,label:c,required:v=!1,defaultValue:b,flexDirection:A="column",variant:w="bordered",size:M="default",align:T="left",color:p="primary",unit:g,outside:o=!1,iconName:N,clearable:S=!1,onClick:f,onChange:C,autoComplete:y="off",showCurrencyValue:k=!1,...L})=>{const{control:P,reset:U,formState:d,watch:q,setValue:O,getValues:R}=je(),F=Te(d==null?void 0:d.errors,`${e}.message`,""),G=I.useCallback(E=>{switch(E){case"custom-date":return Re;case"date-to-today":return qe;case"phone-number":return Me;case"currency":return Ee}},[]),Q=I.useCallback(E=>{switch(r){case"currency":{const V=Number(E.replace(/,/g,""));return O(e,V)}case"date-to-today":{const V=Number(E.replace(/-/g,""));return O(e,V)}case"phone-number":{const V=E.replace(/-/g,"");return O(e,V)}default:return O(e,E)}},[r,e,O]);return I.useEffect(()=>{C&&q((E,{name:V})=>{C({target:{name:V||"",value:R(V||"")}})})},[R,e,C,q]),s.jsx(Ae,{name:e,control:P,defaultValue:b,render:({field:{ref:E,...V}})=>s.jsxs("div",{className:fe("text-field",{"text-field--row":A==="row"},{"text-field--error":F},{"text-field--readonly":u},{"text-field--disabled":n},ce[w],ve[M],me[T],de[p]),children:[c&&s.jsx(se,{text:c,required:v,color:p}),s.jsxs("div",{className:"text-field__outside",children:[s.jsxs("div",{className:"text-field__actions",children:[N&&s.jsx("button",{type:"button",className:"text-field__icon-pressable focus-visible--outline",onClick:f,children:s.jsx(Z,{name:N,className:"text-field__icon"})}),r==="currency"||r==="custom-date"||r==="date-to-today"||r==="phone-number"?s.jsx(Qe,{className:"text-field__form",getInputRef:E,placeholder:t,disabled:n,autoComplete:y,...V,format:G(r),onValueChange:B=>{Q(B.value)},onChange:C}):s.jsx("input",{type:r,className:"text-field__form",ref:E,placeholder:t,disabled:n,autoComplete:y,...V,value:V.value||""}),!o&&g&&s.jsx(W,{className:"text-field__unit",children:g}),S&&!n&&!u&&V.value!==""&&s.jsx("button",{type:"button",className:"text-field__clearable focus-visible--outline",onClick:()=>{U({[e]:""})},children:s.jsx(Z,{name:"icon-check-hlep-fill-1",size:"text-24",color:"text-gray-700 hover:text-gray-600"})})]}),!!o&&g&&s.jsx(W,{className:"text-field__outside-unit",children:g})]}),F&&s.jsx(we,{text:F}),!F&&k&&r==="currency"&&s.jsx(W,{variant:"caption",className:"text-field__currency-format",children:Fe(R(e))})]}),...L})},Xe=({type:e="text",name:t,placeholder:r="",disabled:n=!1,readOnly:u=!1,labelWidth:c,label:v,defaultValue:b,required:A=!1,flexDirection:w="column",variant:M="bordered",size:T="default",align:p="left",color:g="primary",unit:o,outside:N=!1,iconName:S,clearable:f=!1,onClick:C,onChange:y,autoComplete:k="off",hasContext:L=!0,showCurrencyValue:P=!1,...U})=>{const[d,q]=I.useState(b||""),O=I.useCallback(()=>{q(""),y&&y({target:{name:t,value:""}})},[t,y]),R=F=>{q(F.target.value),y&&y({target:{name:t,value:F.target.value}})};return s.jsx(s.Fragment,{children:L?s.jsx(ne,{type:e,name:t,placeholder:r,disabled:n,readOnly:u,labelWidth:c,label:v,required:A,defaultValue:b,flexDirection:w,variant:M,size:T,align:p,color:g,unit:o,outside:N,iconName:S,clearable:f,onClick:C,autoComplete:k,onChange:y,showCurrencyValue:P}):s.jsxs("div",{className:fe("text-field",{"text-field--row":w==="row"},{"text-field--readonly":u},{"text-field--disabled":n},ce[M],ve[T],me[p],de[g]),children:[v&&s.jsx(se,{text:v,required:A,width:c,color:g}),s.jsxs("div",{className:"text-field__outside",children:[s.jsxs("div",{className:"text-field__actions",children:[S&&s.jsx("button",{type:"button",className:"text-field__icon-pressable focus-visible--outline",onClick:C,children:s.jsx(Z,{name:S,className:"text-field__icon"})}),s.jsx("input",{name:t,className:"text-field__form",type:e,placeholder:r,value:d||"",onChange:R,disabled:n,readOnly:u,autoComplete:k,...U}),!N&&o&&s.jsx(W,{className:"text-field__unit",children:o}),f&&!n&&!u&&d!==""&&s.jsx("button",{type:"button",className:"text-field__clearable focus-visible--outline",onClick:O,children:s.jsx(Z,{name:"icon-check-hlep-fill-1",size:"text-24",color:"text-gray-700 hover:text-gray-600"})})]}),!!N&&o&&s.jsx(W,{className:"text-field__outside-unit",children:o})]})]})})},Ye=I.memo(Xe),it=Ye;try{ne.displayName="ContextInput",ne.__docgenInfo={description:"",displayName:"ContextInput",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"string"}},placeholder:{defaultValue:{value:""},description:"",name:"placeholder",required:!1,type:{name:"string"}},type:{defaultValue:{value:"text"},description:"",name:"type",required:!1,type:{name:'HTMLInputTypeAttribute | "custom-date" | "date-to-today" | "phone-number" | "currency"'}},disabled:{defaultValue:{value:"false"},description:"",name:"disabled",required:!1,type:{name:"boolean"}},readOnly:{defaultValue:{value:"false"},description:"",name:"readOnly",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | number"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"string | number"}},labelWidth:{defaultValue:null,description:"",name:"labelWidth",required:!1,type:{name:"string"}},required:{defaultValue:{value:"false"},description:"",name:"required",required:!1,type:{name:"boolean"}},flexDirection:{defaultValue:{value:"column"},description:"",name:"flexDirection",required:!1,type:{name:"enum",value:[{value:'"row"'},{value:'"column"'}]}},variant:{defaultValue:{value:"bordered"},description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"ghost"'},{value:'"bordered"'}]}},size:{defaultValue:{value:"default"},description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"lg"'},{value:'"sm"'},{value:'"default"'}]}},align:{defaultValue:{value:"left"},description:"",name:"align",required:!1,type:{name:"enum",value:[{value:'"center"'},{value:'"left"'},{value:'"right"'}]}},color:{defaultValue:{value:"primary"},description:"",name:"color",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"secondary"'}]}},unit:{defaultValue:null,description:"",name:"unit",required:!1,type:{name:"string"}},outside:{defaultValue:{value:"false"},description:"",name:"outside",required:!1,type:{name:"boolean"}},iconName:{defaultValue:null,description:"",name:"iconName",required:!1,type:{name:"any"}},clearable:{defaultValue:{value:"false"},description:"",name:"clearable",required:!1,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((e: ChangeEvent<HTMLInputElement> | { target: { name: string; value: string | number; }; }) => void)"}},autoComplete:{defaultValue:{value:"off"},description:"",name:"autoComplete",required:!1,type:{name:"enum",value:[{value:'"on"'},{value:'"off"'}]}},hasContext:{defaultValue:{value:"true"},description:"",name:"hasContext",required:!1,type:{name:"boolean"}},showCurrencyValue:{defaultValue:{value:"false"},description:"",name:"showCurrencyValue",required:!1,type:{name:"boolean"}}}}}catch{}export{it as I};
//# sourceMappingURL=index-43f7a015.js.map
