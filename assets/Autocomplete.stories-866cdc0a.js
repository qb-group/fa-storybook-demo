import{j as l}from"./jsx-runtime-4ca860c5.js";import{r as a}from"./index-61bf1805.js";import{o as K,j as B,I as k,C as F}from"./index-aa2c32f6.js";import{T as C}from"./index-5da8d75d.js";import"./img_investment_bias_diagnosis_consultation_4x-2a96972d.js";import"./index-d4b5d7fe.js";import"./index-d648fc06.js";import{c as U}from"./index-f9f069f9.js";import"./_commonjsHelpers-de833af9.js";import"./_baseForOwn-fcf16290.js";import"./index-9d475cdf.js";const v=({label:i,required:E,options:o,defaultValue:x="",onChange:h})=>{const A=a.useId(),u=a.useRef(null),D=a.useRef(null);let L;const[O,s]=a.useState(!1),[d,p]=a.useState(""),[w,j]=a.useState(o),[n,V]=a.useState(null),[r,b]=a.useState(-1),[y,q]=a.useState(x),R=a.useCallback(t=>{const e=t.target.value;p(e);const c=o.filter(f=>f.label.toLowerCase().includes(e.toLowerCase()));j(c),(n==null?void 0:n.label)===d&&s(!1),s(!0),h&&h(e)},[d,o,n,h]),g=a.useCallback(({id:t,label:e})=>{V({id:t,label:e}),q(e),s(!1)},[]),T=a.useCallback(t=>{switch(t.key){case"Tab":{s(!1);break}case"ArrowDown":{t.preventDefault();const e=r<o.length-1?r+1:0;b(e);break}case"ArrowUp":{t.preventDefault();const e=r>0?r-1:o.length-1;b(e);break}case"Enter":{t.preventDefault();const e=o.find((c,f)=>f===r);e&&g(e);break}case"Escape":{t.preventDefault(),p(""),b(-1),s(!1);break}}},[g,o,r]),z=K(()=>{u.current&&!u.current.contains(event==null?void 0:event.target)&&s(!1)});return a.useEffect(()=>{p(x)},[x]),a.useEffect(()=>{console.log("selectedOption changed:",n),n&&(p(n.label),s(!1))},[n]),l.jsxs("div",{className:"flex flex-col relative w-full",children:[l.jsxs("div",{className:"flex flex-col relative gap-2",children:[i&&l.jsx(B,{text:i,required:E}),l.jsxs("div",{className:"flex items-center relative min-h-[3rem] py-3 pr-4 pl-11",children:[l.jsx("button",{type:"button",onClick:()=>{const t=o.filter(e=>e.label.toLowerCase().includes(d.toLowerCase()));j(t),s(!0)},className:"inline-flex items-center justify-center shrink-0 absolute left-4 z-[9]",children:l.jsx(k,{name:"icon-basic-search",size:"text-24",color:"text-gray-500"})}),l.jsx("input",{ref:u,type:"text",id:A,placeholder:"검색하세요",className:"flex absolute inset-0 py-3 pr-4 pl-11 bg-white rounded-form-md border border-gray-300 text-body-base font-500 text-gray-700 placeholder:text-gray-600 outline-none focus-visible--outline",value:d,autoComplete:"off",onFocus:()=>s(!0),onChange:R,onKeyUp:t=>{t.key==="ArrowDown"&&s(!0)},onKeyDown:t=>{T(t)}}),d!==""&&l.jsx("button",{type:"button",className:"inline-flex items-center justify-center shrink-0 absolute right-4 z-[9]",onClick:()=>{p("")},children:l.jsx(k,{name:"icon-check-hlep-fill-1",size:"text-24",color:"text-gray-700 hover:text-gray-600"})})]})]}),O&&l.jsxs("div",{ref:z,className:"flex flex-col absolute top-full z-[99] w-full -mt-[0.375rem] py-2 bg-white rounded-card-xs border border-gray-400 shadow-elevation-5",children:[L,w.length<=0?l.jsx("div",{className:"flex items-center py-2 px-5",children:l.jsx(C,{color:"text-gray-700",children:"등록되지 않은 학교에요"})}):w.map(({id:t,label:e},c)=>l.jsx("button",{ref:f=>{u.current&&u.current!==document.activeElement&&(r&&c===r||c===0)&&(b(!r&&c||r),D.current=f)},type:"button",onClick:()=>g({id:t,label:e}),className:U("flex items-center w-full py-2 px-5 hover:bg-gray-200 outline-none",{"bg-gray-200":e===y},{"outline outline-2 -outline-offset-2 outline-primary-600":r===c}),children:l.jsx(C,{weight:e===y?700:400,color:e===y?"text-primary-500":"text-gray-800",children:e})},t))]})]})},_=v;try{v.displayName="Autocomplete",v.__docgenInfo={description:"",displayName:"Autocomplete",props:{label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactNode"}},required:{defaultValue:null,description:"",name:"required",required:!1,type:{name:"boolean"}},options:{defaultValue:null,description:"",name:"options",required:!0,type:{name:"Options[]"}},defaultValue:{defaultValue:{value:""},description:"",name:"defaultValue",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: string) => void)"}}}}}catch{}const le={title:"DESIGN-SYSTEM/forms/Autocomplete",component:_,tags:["autodocs"],decorators:[i=>l.jsx(F,{pb:"pb-[30rem]",children:i()})]},G=[{id:1,label:"대학1"},{id:2,label:"대학2"},{id:3,label:"대학3"},{id:4,label:"대학4"},{id:5,label:"대학5"},{id:6,label:"대학6"},{id:7,label:"대학7"},{id:8,label:"대학8"},{id:9,label:"대학9"},{id:10,label:"대학10"}],M=i=>l.jsx(_,{...i}),m=M.bind({});m.args={label:"'대' 쳐보셈",required:!0,options:G,defaultValue:"대학1",onChange:void 0};var S,N,I;m.parameters={...m.parameters,docs:{...(S=m.parameters)==null?void 0:S.docs,source:{originalSource:`args => {
  return <Autocomplete {...args} />;
}`,...(I=(N=m.parameters)==null?void 0:N.docs)==null?void 0:I.source}}};const ae=["Default"];export{m as Default,ae as __namedExportsOrder,le as default};
//# sourceMappingURL=Autocomplete.stories-866cdc0a.js.map
